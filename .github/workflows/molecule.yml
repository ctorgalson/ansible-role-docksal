---
name: Molecule Test

on: [push]

jobs:
  molecule:
    runs-on: ubuntu-latest
    strategy:
      fail-fast: false
      matrix:
        MOLECULE_UBUNTU_VERSION:
          - "22.04"
    steps:
      - name: Checkout
        uses: actions/checkout@v2
        with:
          path: "${{ github.repository }}"
      - name: DEBUG
        run: ls -hal
      - name: Molecule
        uses: gofrolist/molecule-action@v2
        with:
          molecule-working-dir: ctorgalson
          # molecule_options: --debug --base-config molecule/_shared/base.yml
          molecule_command: test
          # molecule_args: --scenario-name ${{ matrix.scenario }}
        env:
          ANSIBLE_FORCE_COLOR: '1'

# jobs:
#   test:
#     runs-on: ubuntu-22.04
#     strategy:
#       max-parallel: 4
#       matrix:
#         python-version: ["3.10.8"]
#         MOLECULE_UBUNTU_VERSION: ["22.04"]
#
#     steps:
#       - uses: actions/checkout@v1
#       - name: Set up Python ${{ matrix.python-version }}
#         uses: actions/setup-python@v1
#         with:
#           python-version: ${{ matrix.python-version }}
#       - name: Install dependencies
#         run: |
#           ls -hal
#           sudo apt update
#           sudo apt install python3-setuptools
#           python3 -m pip install docker
#           #python3 -m pip install --upgrade pip
#           ./scripts/install-python-dependencies.sh
#       - name: Test with molecule
#         run: |
#           molecule --debug test
